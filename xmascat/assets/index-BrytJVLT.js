import{h as E}from"./kaplay-CpR_OpMc.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))p(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&p(s)}).observe(document,{childList:!0,subtree:!0});function c(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function p(t){if(t.ep)return;t.ep=!0;const a=c(t);fetch(t.href,a)}})();E({width:400,height:700,background:[30,30,50],stretch:!0,letterbox:!0,pixelDensity:2});loadSprite("player","sprites/player.png");loadSprite("baguette","sprites/baguette.png");loadSprite("present","sprites/present.png");loadSprite("cheese","sprites/cheese.png");loadSprite("bomb","sprites/bomb.png");loadSprite("brick","sprites/brick.png");loadSprite("chilli","sprites/chilli.png");loadSprite("magnet","sprites/magnet.png");loadSprite("title_graphic","sprites/title_graphic.png");loadSprite("backdrop","sprites/backdrop.png");loadSound("bad","bad.wav");loadSound("brick","brick.wav");loadSound("finish","finish.wav");loadSound("pickup","pickup.wav");loadSound("bomb","bomb.wav");loadSound("bomb2","bomb2.wav");loadSound("chilli","chilli.wav");loadSound("magnet","magnet.wav");loadSound("music","music_song.mp3");loadSound("start","start.wav");const x=60,O=12345,y={baguette:{sprite:"baguette",scale:.16,points:10,weight:30},present:{sprite:"present",scale:.16,points:25,weight:25},cheese:{sprite:"cheese",scale:.16,points:15,weight:25},bomb:{sprite:"bomb",scale:.16,points:-50,weight:15},brick:{sprite:"brick",scale:.16,points:-20,weight:10,fast:!0},chilli:{sprite:"chilli",scale:.16,points:5,weight:3,powerup:"speed"},magnet:{sprite:"magnet",scale:.16,points:5,weight:2,powerup:"magnet"}};scene("start",()=>{add([rect(width(),height()),pos(0,0),color(146,200,160),z(-100)]),add([sprite("title_graphic"),pos(width()/2,110),anchor("center"),scale(.28)]),add([text(`Catch falling items!
Avoid the bad stuff!`,{size:22,align:"center"}),pos(width()/2,250),anchor("center"),color(60,60,60)]);const o=320,r=[{sprite:"baguette",name:"Baguette",desc:"+10"},{sprite:"present",name:"Present",desc:"+25"},{sprite:"cheese",name:"Cheese",desc:"+15"}];add([text("GOOD",{size:18}),pos(100,o-25),anchor("center"),color(40,140,40)]),r.forEach((s,n)=>{add([sprite(s.sprite),pos(45,o+15+n*55),anchor("center"),scale(.08)]),add([text(`${s.name}: ${s.desc}`,{size:16}),pos(85,o+15+n*55),anchor("left"),color(40,100,40)])});const c=[{sprite:"bomb",name:"Bomb",desc:"-50"},{sprite:"brick",name:"Brick",desc:"-20"}];add([text("BAD",{size:18}),pos(width()-100,o-25),anchor("center"),color(180,60,60)]),c.forEach((s,n)=>{add([sprite(s.sprite),pos(width()/2+45,o+15+n*55),anchor("center"),scale(.08)]),add([text(`${s.name}: ${s.desc}`,{size:16}),pos(width()/2+85,o+15+n*55),anchor("left"),color(150,60,60)])});const p=510,t=[{sprite:"chilli",name:"Chilli",desc:"Speed up!"},{sprite:"magnet",name:"Magnet",desc:"Pull items!"}];add([text("POWERUPS",{size:18}),pos(width()/2,p),anchor("center"),color(180,140,40)]),t.forEach((s,n)=>{add([sprite(s.sprite),pos(100+n*200,p+40),anchor("center"),scale(.08)]),add([text(`${s.name}`,{size:14}),pos(100+n*200,p+70),anchor("center"),color(140,100,40)]),add([text(`${s.desc}`,{size:12}),pos(100+n*200,p+88),anchor("center"),color(120,90,40)])});const a=add([rect(200,70,{radius:12}),pos(width()/2,height()-60),anchor("center"),color(80,160,80),area(),"startBtn"]);add([text("Start",{size:40}),pos(width()/2,height()-60),anchor("center"),color(255,255,255)]),a.onClick(()=>{play("start"),play("music",{loop:!0,volume:.5}),go("game")})});scene("game",()=>{add([sprite("backdrop"),pos(0,0),scale(.5),z(-100)]),randSeed(O);let o=0,r=x,c=1,p=!1,t=null,a=null;add([rect(width()-20,20),pos(10,10),color(60,60,60),fixed(),z(100)]);const s=add([rect(width()-20,20),pos(10,10),color(100,200,100),fixed(),z(101),"timerBar"]),n=add([text("Score: 0",{size:28}),pos(width()/2,50),anchor("center"),fixed(),z(100),color(255,255,255)]),m=add([text("",{size:20}),pos(width()/2,80),anchor("center"),fixed(),z(100),color(255,200,50)]),h=add([sprite("player"),pos(width()/2,height()-50),anchor("center"),scale(.2),area(),"player"]);h.onUpdate(()=>{h.pos.x=mousePos().x,h.pos.x<30&&(h.pos.x=30),h.pos.x>width()-30&&(h.pos.x=width()-30)});function v(){const e=Object.keys(y),i=e.map(l=>y[l].weight),g=i.reduce((l,T)=>l+T,0);let w=rand(0,g),f=e[0];for(let l=0;l<e.length;l++)if(w-=i[l],w<=0){f=e[l];break}const u=y[f],k=u.fast?rand(350,500):rand(100,250),P=rand(-180,180),d=add([sprite(u.sprite),pos(rand(30,width()-30),-50),anchor("center"),scale(u.scale),rotate(rand(0,360)),area(),offscreen({destroy:!0}),{itemType:f,points:u.points,powerup:u.powerup||null,fallSpeed:k,rotSpeed:P},"fallingItem"]);d.onUpdate(()=>{if(d.pos.y+=d.fallSpeed*c*dt(),d.angle+=d.rotSpeed*dt(),p){const l=h.pos.x-d.pos.x;d.pos.x+=l*2*dt()}}),d.onExitScreen(()=>{d.pos.y>height()&&d.points>0&&(o-=2,n.text=`Score: ${o}`,add([text("-2",{size:18}),pos(d.pos.x,height()-60),anchor("center"),color(255,150,150),opacity(1),lifespan(.6,{fade:.3}),move(UP,40)]))})}h.onCollide("fallingItem",e=>{if(o+=e.points,n.text=`Score: ${o}`,e.powerup==="speed"?(play("chilli"),m.text="SPEED UP!",t&&t.cancel(),tween(c,5,.5,i=>c=i,easings.easeOutCubic),t=wait(3,()=>{tween(c,1,.8,i=>c=i,easings.easeInOutCubic).onEnd(()=>{m.text=""})})):e.powerup==="magnet"&&(play("magnet"),p=!0,m.text="MAGNET!",a&&a.cancel(),a=wait(4,()=>{p=!1,m.text=""})),e.points>0)e.powerup||play("pickup"),add([text(`+${e.points}`,{size:20}),pos(e.pos),anchor("center"),color(100,255,100),opacity(1),lifespan(.5,{fade:.3}),move(UP,50)]);else if(e.itemType==="bomb"){play("bomb"),play("bomb2"),shake(12),add([text(`${e.points}`,{size:28}),pos(e.pos),anchor("center"),color(255,50,50),opacity(1),lifespan(.7,{fade:.3}),move(UP,30)]);for(let i=0;i<8;i++){const g=i/8*Math.PI*2;add([circle(8),pos(e.pos),anchor("center"),color(255,rand(100,200),0),opacity(1),lifespan(.4,{fade:.2}),move(vec2(Math.cos(g),Math.sin(g)),rand(100,200))])}add([circle(25),pos(e.pos),anchor("center"),color(255,255,100),opacity(1),lifespan(.2,{fade:.15})])}else e.itemType==="brick"?(play("brick"),shake(8),add([text(`${e.points}`,{size:24}),pos(e.pos),anchor("center"),color(180,100,60),opacity(1),lifespan(.5,{fade:.3}),move(UP,50)])):(play("bad"),add([text(`${e.points}`,{size:24}),pos(e.pos),anchor("center"),color(255,100,100),opacity(1),lifespan(.5,{fade:.3}),move(UP,50)]));destroy(e)});let b=0,S=.5;onUpdate(()=>{if(b+=dt(),b>=S){const e=randi(1,5);for(let f=0;f<e;f++)v();const i=1-r/x,g=Math.max(.3,.8-i*.4),w=Math.max(.6,1.5-i*.6);S=rand(g,w),b=0}}),onUpdate(()=>{r-=dt();const e=r/x;s.width=(width()-20)*e,e<.25?s.color=rgb(255,80,80):e<.5&&(s.color=rgb(255,200,80)),r<=0&&(play("finish"),go("gameover",o))})});scene("gameover",o=>{add([text("Game Over",{size:56}),pos(width()/2,height()/3),anchor("center"),color(255,100,100)]),add([text(`Final Score: ${o}`,{size:36}),pos(width()/2,height()/2),anchor("center"),color(255,255,255)]);let r="";o>=500?r="Amazing!":o>=300?r="Great!":o>=150?r="Good!":o>=50?r="Not bad!":r="Try again!",add([text(r,{size:28}),pos(width()/2,height()/2+50),anchor("center"),color(255,220,100)]);const c=add([rect(180,60,{radius:10}),pos(width()/2,height()/2+130),anchor("center"),color(80,180,80),area(),"retryBtn"]);add([text("Retry",{size:36}),pos(width()/2,height()/2+130),anchor("center"),color(255,255,255)]),c.onClick(()=>{go("game")})});go("start");
//# sourceMappingURL=index-BrytJVLT.js.map
